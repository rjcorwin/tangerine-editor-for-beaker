<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>A Simple Page with CKEditor</title>
        <!-- Make sure the path to CKEditor is correct. -->
        <script src="ckeditor/ckeditor.js"></script>
        <script src="editor.js"></script>
        <script src="/bower_components/webcomponentsjs/webcomponents-loader.js"></script>
        <link rel="import" href="/bower_components/polymer/polymer.html">
        <link rel="import" href="/bower_components/tangy-form/tangy-form.html">
        <link rel="import" href="/bower_components/tangy-section/tangy-section.html">
        <link rel="import" href="/bower_components/tangy-hide-if/tangy-hide-if.html">
    </head>
    <body onload="initializeSaving()">
      <button id="editButton" onclick="edit()">
				EDIT
			</button>
      <div id="content" contenteditable="false">
				Enter content here.
				<tangy-form>
				<div class="content">
				<p>Add sections...</p>
				<tangy-section>
				<div class="content">
				<p>Add form elements...</p>

				<p><select id="foo" name="foo"><option value="yes">yes</option><option value="no">no</option></select></p>
				<tangy-hide-if condition="newValue.foo == 'no'" style="display: block;">
				<div class="content">
				<p>Add form elements...</p>

				<p><input id="bar" name="bar" type="text"></p>
				</div>
				</tangy-hide-if>

				<p>&nbsp;</p>
				</div>
				</tangy-section>

				<p>&nbsp;</p>
				</div>
				</tangy-form>
      </div>
			<script>
			var editor;
			CKEDITOR.on('instanceReady', function(ev) {
					editor = ev.editor;
					// you can also add more config for this instance of CKE here
					// e.g. editor.setReadOnly(false);
			});
			function edit() {
				// Turn off automatic editor creation first.
				// CKEDITOR.disableAutoInline = true;
        // CKEDITOR.allowedContent = true 
        /*
        CKEDITOR.allowedContent = {
          "tangerine-section": true
        }
        */
        let content = document.querySelector('#content');
        let editButton = document.querySelector('#editButton');
				if (content.contentEditable == "true") {
					content.contentEditable = "false"
					editor.destroy();
					editButton.innerText = "EDIT"
				} else {
					content.contentEditable = "true"
					CKEDITOR.inline( 'content' );
					editButton.innerText = "PLAY"
				}
			}
			</script>
      
    </body>
</html>

